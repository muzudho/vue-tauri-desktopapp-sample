<template>
    <div>
        <h1>onMounted ã‚’ä½¿ã†ç·´ç¿’ã ãœï¼</h1>

        <h2>åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ä¸€è¦§ï¼š</h2>

        <v-row>
            <v-col cols="1">1</v-col>
            <v-col cols="3">appCacheDirStr</v-col>
            <v-col>{{ appCacheDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">2</v-col>
            <v-col cols="3">appConfigDirStr</v-col>
            <v-col>{{ appConfigDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">3</v-col>
            <v-col cols="3">appDataDirStr</v-col>
            <v-col>{{ appDataDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">4</v-col>
            <v-col cols="3">appLocalDataDirStr</v-col>
            <v-col>{{ appLocalDataDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">5</v-col>
            <v-col cols="3">appLogDirStr</v-col>
            <v-col>{{ appLogDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">6</v-col>
            <v-col cols="3">audioDirStr</v-col>
            <v-col>{{ audioDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">7</v-col>
            <v-col cols="3">cacheDirStr</v-col>
            <v-col>{{ cacheDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">8</v-col>
            <v-col cols="3">configDirStr</v-col>
            <v-col>{{ configDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">9</v-col>
            <v-col cols="3">dataDirStr</v-col>
            <v-col>{{ dataDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">10</v-col>
            <v-col cols="3">desktopDirStr</v-col>
            <v-col>{{ desktopDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">11</v-col>
            <v-col cols="3">documentDirStr</v-col>
            <v-col>{{ documentDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">12</v-col>
            <v-col cols="3">downloadDirStr</v-col>
            <v-col>{{ downloadDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">13</v-col>
            <v-col cols="3">executableDirStr</v-col>
            <v-col>{{ executableDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">14</v-col>
            <v-col cols="3">fontDirStr</v-col>
            <v-col>{{ fontDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">15</v-col>
            <v-col cols="3">homeDirStr</v-col>
            <v-col>{{ homeDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">16</v-col>
            <v-col cols="3">localDataDirStr</v-col>
            <v-col>{{ localDataDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">17</v-col>
            <v-col cols="3">pictureDirStr</v-col>
            <v-col>{{ pictureDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">18</v-col>
            <v-col cols="3">publicDirStr</v-col>
            <v-col>{{ publicDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">19</v-col>
            <v-col cols="3">resourceDirStr</v-col>
            <v-col>{{ resourceDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">20</v-col>
            <v-col cols="3">runtimeDirStr</v-col>
            <v-col>{{ runtimeDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">21</v-col>
            <v-col cols="3">tempDirStr</v-col>
            <v-col>{{ tempDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">22</v-col>
            <v-col cols="3">templateDirStr</v-col>
            <v-col>{{ templateDirStr }}</v-col>
        </v-row>
        <v-row>
            <v-col cols="1">23</v-col>
            <v-col cols="3">videoDirStr</v-col>
            <v-col>{{ videoDirStr }}</v-col>
        </v-row>

        <h2>ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹:</h2>

        <!--
        <p>resourceDirVM: {{ resourceDirVM }}</p>
        <p>testPath: {{ testPath }}</p>
        <p>testPath2: {{ testPath2 }}</p>
        <p>fileContent2: {{ fileContent2 }}</p>
        -->
        <p>testPathStr: {{ testPathStr }}</p>
        <p>executablePathContentVM: {{ executablePathContentVM }}</p>
        <p>fileContent: {{ fileContent }}</p>
        <p v-if="errorMessage" style="color: red;">{{ errorMessage }}</p>

        <router-link to="/">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</router-link>
    </div>
</template>

<script setup lang="ts">
    import { onMounted, ref } from 'vue';
    import { BaseDirectory, readTextFile } from '@tauri-apps/plugin-fs';
    // {  }
    import * as path from '@tauri-apps/api/path';
    // import { resourceDir } from '@tauri-apps/api/path';
    // import { resolveResource } from '@tauri-apps/api/path';
    // import { convertFileSrc } from '@tauri-apps/api/core';

    // ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ãƒ»ãƒ‘ã‚¹
    const appCacheDirStr = ref<string>('1 èª­ã¿è¾¼ã¿ä¸­...');           // 1
    const appConfigDirStr = ref<string>('2 èª­ã¿è¾¼ã¿ä¸­...');          // 2
    const appDataDirStr = ref<string>('3 èª­ã¿è¾¼ã¿ä¸­...');            // 3
    const appLocalDataDirStr = ref<string>('4 èª­ã¿è¾¼ã¿ä¸­...');       // 4
    const appLogDirStr = ref<string>('5 èª­ã¿è¾¼ã¿ä¸­...');             // 5
    const audioDirStr = ref<string>('6 èª­ã¿è¾¼ã¿ä¸­...');              // 6
    const cacheDirStr = ref<string>('7 èª­ã¿è¾¼ã¿ä¸­...');              // 7
    const configDirStr = ref<string>('8 èª­ã¿è¾¼ã¿ä¸­...');             // 8
    const dataDirStr = ref<string>('9 èª­ã¿è¾¼ã¿ä¸­...');               // 9
    const desktopDirStr = ref<string>('10 èª­ã¿è¾¼ã¿ä¸­...');           // 10
    const documentDirStr = ref<string>('11 èª­ã¿è¾¼ã¿ä¸­...');          // 11
    const downloadDirStr = ref<string>('12 èª­ã¿è¾¼ã¿ä¸­...');          // 12
    const executableDirStr = ref<string>('13 èª­ã¿è¾¼ã¿ä¸­...');        // 13
    const fontDirStr = ref<string>('14 èª­ã¿è¾¼ã¿ä¸­...');              // 14
    const homeDirStr = ref<string>('15 èª­ã¿è¾¼ã¿ä¸­...');              // 15
    const localDataDirStr = ref<string>('16 èª­ã¿è¾¼ã¿ä¸­...');         // 16
    const pictureDirStr = ref<string>('17 èª­ã¿è¾¼ã¿ä¸­...');           // 17
    const publicDirStr = ref<string>('18 èª­ã¿è¾¼ã¿ä¸­...');            // 18
    const resourceDirStr = ref<string>('19 èª­ã¿è¾¼ã¿ä¸­...');          // 19
    const runtimeDirStr = ref<string>('20 èª­ã¿è¾¼ã¿ä¸­...');           // 20
    const tempDirStr = ref<string>('21 èª­ã¿è¾¼ã¿ä¸­...');              // 21
    const templateDirStr = ref<string>('22 èª­ã¿è¾¼ã¿ä¸­...');          // 22
    const videoDirStr = ref<string>('23 èª­ã¿è¾¼ã¿ä¸­...');             // 23


    // ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ä¿æŒã™ã‚‹ reactive å¤‰æ•°
    const filePathVM = ref("C:\\Users\\muzud\\OneDrive\\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\\temp\\temp.csv");
    // TODO ğŸŒŸ `C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\public\sample.txt` ã‚’ç¤ºã™æ–¹æ³•ãŒåˆ†ã‹ã‚‰ãªã„ã€‚é–‹ç™ºä¸­ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’æŒ‡ã—ãŸã„ã€‚
    // TODO ğŸŒŸ ã‚ã‚‹ã„ã¯ `C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src-tauri\target\debug` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸¸ã”ã¨ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã‹ï¼Ÿ
    // TODO ğŸŒŸ åŒæ¢±ã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒé‡ããªã‚‹ã‹ï¼Ÿ å¤–éƒ¨ã«ç½®ã„ã¦ãŠãæ–¹ãŒã„ã„ï¼Ÿ ãƒ­ãƒ¼ã‚«ãƒ«ï¼°ï¼£ã‹ã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã‹ã€‚

    // const resourceDirVM = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    const testPathStr = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    // const testPath2 = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    // const testPath3 = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    const fileContent = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    //const fileContent2 = ref<string>('èª­ã¿è¾¼ã¿ä¸­...');
    const errorMessage = ref<string>('');

    const executablePathContentVM = ref('èª­ã¿è¾¼ã¿ä¸­...');

    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸã¨ãã«å®Ÿè¡Œ
    onMounted(async () => {
        try {
            // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ä¸€è¦§ï¼š
            appCacheDirStr.value = await path.appCacheDir();            // 1    `C:\Users\muzud\AppData\Local\com.vue-tauri-desktopapp-sample.app`
            appConfigDirStr.value = await path.appConfigDir();          // 2    `C:\Users\muzud\AppData\Roaming\com.vue-tauri-desktopapp-sample.app`
            appDataDirStr.value = await path.appDataDir();              // 3    `C:\Users\muzud\AppData\Roaming\com.vue-tauri-desktopapp-sample.app`
            appLocalDataDirStr.value = await path.appLocalDataDir();    // 4    `C:\Users\muzud\AppData\Local\com.vue-tauri-desktopapp-sample.app`
            appLogDirStr.value = await path.appLogDir();                // 5    `C:\Users\muzud\AppData\Local\com.vue-tauri-desktopapp-sample.app\logs`
            audioDirStr.value = await path.audioDir();                  // 6    `C:\Users\muzud\Music`
            cacheDirStr.value = await path.cacheDir();                  // 7    `C:\Users\muzud\AppData\Local`
            configDirStr.value = await path.configDir();                // 8    `C:\Users\muzud\AppData\Roaming`
            dataDirStr.value = await path.dataDir();                    // 9    `C:\Users\muzud\AppData\Roaming`
            desktopDirStr.value = await path.desktopDir();              // 10   `C:\Users\muzud\OneDrive\ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—`
            documentDirStr.value = await path.documentDir();            // 11   `C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`
            downloadDirStr.value = await path.downloadDir();            // 12   `C:\Users\muzud\Downloads`
            //executableDirStr.value = await path.executableDir();      // 13   FIXME: èª­ã¿è¾¼ã¿ä¸­ã§æ­¢ã¾ã£ã¦ã—ã¾ã†ï¼Ÿ
            //fontDirStr.value = await path.fontDir();                  // 14   FIXME: èª­ã¿è¾¼ã¿ä¸­ã§æ­¢ã¾ã£ã¦ã—ã¾ã†ï¼Ÿ
            homeDirStr.value = await path.homeDir();                    // 15   `C:\Users\muzud`   PCã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ›ãƒ¼ãƒ 
            localDataDirStr.value = await path.localDataDir();          // 16   `C:\Users\muzud\AppData\Local`
            pictureDirStr.value = await path.pictureDir();              // 17   `C:\Users\muzud\OneDrive\ç”»åƒ`
            publicDirStr.value = await path.publicDir();                // 18   `C:\Users\Public`
            resourceDirStr.value = await path.resourceDir();            // 19   `C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src-tauri\target\debug`
            // runtimeDirStr.value = await path.runtimeDir();           // 20   FIXME: èª­ã¿è¾¼ã¿ä¸­ã§æ­¢ã¾ã£ã¦ã—ã¾ã†ï¼Ÿ
            tempDirStr.value = await path.tempDir();                    // 21   `C:\Users\muzud\AppData\Local\Temp\`
            templateDirStr.value = await path.templateDir();            // 22   `C:\Users\muzud\AppData\Roaming\Microsoft\Windows\Templates`
            videoDirStr.value = await path.videoDir();                  // 23   `C:\Users\muzud\Videos`


            executablePathContentVM.value = await readTextFile("start-config.json", { baseDir:BaseDirectory.Executable });

            // // ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿å‡¦ç†ã‚’è¿½åŠ 
            // fileContent2.value = await readTextFile("sample.txt", { baseDir: BaseDirectory.AppConfig })

            // resourceDirVM.value = await resourceDir();  // C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src-tauri\target\debug
            // testPath3.value = resourceDirVM.value + "/../../../src/assets"

            // Tauri ã® API ã§ src/assets/sample.txt ã‚’èª­ã¿è¾¼ã‚€
            //const testPathStr = await path.homeDir();  // PCã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ›ãƒ¼ãƒ 
            //const testPathStr = await path.resourceDir();  // `C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src-tauri\target\debug`
            //const testPathStr = await resolveResource('assets/sample.txt');  // C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src-tauri\target\debug\assets\image.png
            
            // // debug ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã®ä¸‹ã« assets ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ãŒç„¡ã„
            // testPath2.value = convertFileSrc(testPathStr);  // http://asset.localhost/C%3A%5CUsers%5Cmuzud%5COneDrive%5C%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%5CGitHub%5Cvue-tauri-desktopapp-sample%5Csrc-tauri%5Ctarget%5Cdebug%5Cassets%5Csample.txt

            // // TODO ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ›ãƒ¼ãƒ ã¯å–ã‚Œãªã„ã‹ï¼Ÿ
            // testPath.value = testPathStr;  // `C:\Users\muzud`

            alert(`ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼š"${filePathVM.value}"`);
            const contentStr = await readTextFile(filePathVM.value);  
            alert(`ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ï¼š"${contentStr}"`);

            // const contentStr = await readTextFile(
            //         "public/sample.txt",
            //         //"/public/sample.txt"
            //         //"C:/Users/muzud/OneDrive/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/temp/sample.txt"
            //         //"/public/sample.txt"
            //         // C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src\assets\sample.txt
            //         //"C:\\Users\\muzud\\OneDrive\\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\\GitHub\\vue-tauri-desktopapp-sample\\src\\assets\\sample.txt"
            //         //"http://asset.localhost/C:/Users/muzud/OneDrive/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/GitHub/vue-tauri-desktopapp-sample/src-tauri/target/debug/assets/sample.txt"
            //         //"http://asset.localhost/C%3A%5CUsers%5Cmuzud%5COneDrive%5C%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%5CGitHub%5Cvue-tauri-desktopapp-sample%5Csrc-tauri%5Ctarget%5Cdebug%5Cassets%5Csample.txt"
            //         // // ãƒ­ãƒ¼ã‚«ãƒ«PCã®å ´åˆ
            //         // // C:\Users\muzud\OneDrive\ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\GitHub\vue-tauri-desktopapp-sample\src\assets\sample.txt
            //         // //await path.join(testPath.value, 'assets/sample.txt'),
            //         // testPathStr

            //         {
            //             baseDir: BaseDirectory.Home,
            //         }
            //     );

            fileContent.value = contentStr; // ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’ã‚»ãƒƒãƒˆ
        } catch (error) {
            errorMessage.value = `ã‚¨ãƒ©ãƒ¼ã ãœ: ${error}`; // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        }
    });

    // async function getHomePath() {
    //     return await path.homeDir();
    // }

    //const homePath = await getHomePath();
</script>